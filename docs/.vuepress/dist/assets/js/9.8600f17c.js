(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{364:function(t,s,n){"use strict";n.r(s);var a=n(42),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"centos搭建gilab"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos搭建gilab"}},[t._v("#")]),t._v(" CentOS搭建gilab")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://about.gitlab.com/install/#centos-8",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("步骤安装 root 安装去除所有sudo 命令"),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 允许sshd 远程服务 ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" dnf "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" policycoreutils openssh-server\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" sshd\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl start sshd\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 防火墙永久允许接受https 和http 请求，没有ssh证书可以使用http 作为gitlab 请求 协议，建议使用https ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" firewall-cmd --permanent --add-service"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" firewall-cmd --permanent --add-service"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl reload firewalld\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 支持邮件服务")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" dnf "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" postfix\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" postfix\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl start postfix\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加gitlab 报仓库")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装gitlab 并设置默认的外界访问地址 ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("EXTERNAL_URL")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://gitlab.example.com"')]),t._v(" dnf "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y gitlab-ee\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#以上已安装 默认访问地址需要修改(一般为本机ip+端后口或者nginx 转发)")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看安装版本 cat /opt/gitlab/embedded/service/gitlab-rails/VERSION")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改配置访问地址 ")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" etc/gitlab/gitlab.rb \n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#找到该行 external_url 'https://gitlab.example.com'")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改后 external_url 'http://192.168.3.100:8088' (我本机CentOS地址3.100)")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 退出vim 编译器 重新启动配置 之后需要重启gitlab ")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" gitlab-ctl reconfigure\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动gitlab服务")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" gitlab-ctl start\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#gitlab服务停止")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" gitlab-ctl stop\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#重启gitlab服务")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" gitlab-ctl restart\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 浏览器直接访问 http://192.168.3.100:8088  可达到刚配置的 gitlab ，第一次访问默认root 登录，需要自己设置密码")]),t._v("\n\n")])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);